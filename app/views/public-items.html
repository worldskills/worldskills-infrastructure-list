<h1>{{ skill.skill_number }} {{ skill.name.text }} <small>{{ skill.event.name.text }}</small></h1>

<hr/>

<ws-spinner class="bigSpinner" ng-if="loading"></ws-spinner>

<div ng-hide="loading">

    <div class="il-public-items-category">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h2 class="panel-title" translate>SKILL_INFORMATION</h2>
        </div>

        <div class="table-responsive">

          <table class="table table-condensed table-bordered il-public-items-table">
        <colgroup>
          <col width="25%" />
          <col width="75%" />
        </colgroup>
        <tbody>
          <tr ng-repeat="pp in skillManagement track by $index">
            <td class="text-right b">{{pp.position.name.text}}</td>
            <td>{{pp.person.first_name}} {{pp.person.last_name}}</td>
            <!--<td>person_{{n}}@example.com</td>-->
          </tr>

        <!--<tr>-->
          <!--<td class="text-right b">Jury President</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
          <!--<td class="text-right b">Workshop Sector Manager</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
          <!--<td class="text-right b">Workshop Manager</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
          <!--<td class="text-right b">Workshop Assistant</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
          <!--<td class="text-right b">Chief Expert</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <!--<tr>-->
          <!--<td class="text-right b">Deputy Chief Expert</td>-->
          <!--<td>-->
            <!--John Smith<br>-->
            <!--john.smith@example.com-->
          <!--</td>-->
        <!--</tr>-->
        <tr>
          <td class="text-right b" colspan="2">&nbsp;</td>
        </tr>
          <tr>
            <td class="text-right b" translate>TH_COMPETITORS</td>
            <td>{{participantNumbers.num_competitors}}</td>
          </tr>
          <tr>
            <td class="text-right b" translate>TH_EXPERTS</td>
            <td>{{participantNumbers.num_experts}}</td>
          </tr>
          <tr>
            <td class="text-right b" translate>TH_INTERPRETERS</td>
            <td>{{participantNumbers.num_interpreters}}</td>
          </tr>
        </tbody>
      </table>
        </div>
      </div>
    </div>

    <div ng-repeat="category in categories" ng-if="category.items.length" class="il-public-items-category">

        <div class="panel panel-default">
            <div class="panel-heading panel-heading-btn">
              <h2 class="panel-title">{{ category.category.name.text }}</h2>
              <button type="button" ng-click="openSuggestModalAside(parent);" data-target="" class="btn btn-xs btn-primary">
                <span translate><i class="fas fa-plus-circle"></i>SUGGEST_ADDITION</span>
              </button>
            </div>

            <div class="table-responsive">
                <table class="table table-condensed table-bordered il-public-items-table table-with-actions">
                    <colgroup>
                        <col width="15%" />
                        <col width="25%" />
                        <col width="25%" />
                        <col width="25%" />
                        <col width="10%" />
                      </colgroup>
                    <thead>
                        <tr ng-if="canRecommend()">
                            <th class="text-right" translate>TH_QUANTITY</th>
                            <th translate>TH_ITEM</th>
                            <th translate>TH_DETAILS</th>
                            <th translate>TH_LAST_MODIFIED</th>
                            <th translate>TH_STATUS</th>
                            <th translate>TH_ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in category.items" ng-class="{'child': !!item.parent_id}">
                          <td class="text-right">
                              <span>{{'ITEM_READABLE_QUANTITY_' + item.multiplier |
                                  translate: {quantity: item.quantity, factor: item.multiply_factor} }}</span>
                              <span ng-show="item.additional_quantity > 0"><br> + {{item.additional_quantity}} <span translate>ADDITIONAL</span></span>
                          </td>
                          <td>
                              <span ng-show="!!item.parent_id">â””&nbsp;</span>
                              <span ng-if="item.status.id === ITEM_STATUS.RED || item.status.id === ITEM_STATUS.BLACK">{{ item.description.text }}</span>
                              <span ng-if="item.status.id !== ITEM_STATUS.RED && item.status.id !== ITEM_STATUS.BLACK">{{item.supplied_item.description.text}}</span>
                          </td>
                          <td>
                            <div ng-if="item.status.id !== ITEM_STATUS.RED && item.status.id !== ITEM_STATUS.BLACK">
                              <div class="row" ng-if="item.supplied_item.manufacturer">
                                <div class="col col-xs col-xs-4 supplied-key" translate>TH_MANUFACTURER</div>
                                <div class="col col-xs col-xs-8 supplied-val">{{item.supplied_item.manufacturer}}</div>
                              </div>
                              <div class="row" ng-if="item.supplied_item.model">
                                <div class="col col-xs col-xs-4 supplied-key" translate>TH_MODEL</div>
                                <div class="col col-xs col-xs-8 supplied-val">{{item.supplied_item.model}}</div>
                              </div>
                              <div class="row" ng-if="item.supplied_item.size">
                                <div class="col col-xs col-xs-4 supplied-key" translate>TH_SIZE</div>
                                <div class="col col-xs col-xs-8 supplied-val">{{item.supplied_item.size}}</div>
                              </div>
                              <div class="row" ng-if="item.supplied_item.part_number">
                                <div class="col col-xs col-xs-4 supplied-key" translate>TH_PART_NUM</div>
                                <div class="col col-xs col-xs-8 supplied-val">{{item.supplied_item.part_number}}</div>
                              </div>
                              <div class="row" ng-if="item.supplied_item.files.length > 0">
                                <div class="col col-xs col-xs-4 supplied-key" translate>TH_FILES</div>
                                <div class="col col-xs col-xs-8 supplied-val">
                                  <ul class="public-files">
                                    <li ng-repeat="file in item.supplied_item.files">
                                      <a target="_blank" href="{{UPLOADS_URL}}/{{file.download_path}}">{{file.filename_original}} ({{file.size | filesize}})</a>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                            </div>
                          </td>
                          <td>
                            <span ng-if="item.supplied_item.modified">
                              {{ 'DATE_TIME_AT' |
                                translate: {date: (item.supplied_item.modified | amDateFormat: 'LL'), time: (item.supplied_item.modified | amDateFormat: 'LT')} }}
                            </span>
                            <span ng-if="!item.supplied_item.modified">
                              {{ 'DATE_TIME_AT' |
                                translate: {date: (item.modified | amDateFormat: 'LL'), time: (item.modified | amDateFormat: 'LT')} }}
                            </span>
                          </td>
                          <td>
                              <span ng-show="item.status.id == ITEM_STATUS.RED" class="label label-danger">{{ item.status.name.text }}</span>
                              <span ng-show="item.status.id == ITEM_STATUS.YELLOW" class="label label-warning">{{ item.status.name.text }}</span>
                              <span ng-show="item.status.id == ITEM_STATUS.BLACK" class="label label-info">{{ item.status.name.text }}</span>
                              <span ng-show="item.status.id == ITEM_STATUS.GREEN" class="label label-success">{{ item.status.name.text }}</span>
                          </td>
                          <td ng-if="canRecommend()">
                              <a ng-if="item.status.id != ITEM_STATUS.GREEN" class="pull-right btn btn-warning btn-xs" ng-click="openSuggestModalAside(parent, item)" style="margin-right:8px;"><span
                                class="glyphicon glyphicon-edit"></span></a>
                              <a ng-if="item.status.id != ITEM_STATUS.GREEN" class="pull-right btn btn-danger btn-xs" ng-click="suggestDeletion(parent, item)" style="margin-right:8px;"><span
                              class="glyphicon glyphicon-remove"></span></a>
                          </td>
                        </tr>
                    </tbody>
                    <tbody ng-show="!category.items.length">
                        <tr>
                            <td></td>
                            <td colspan="3" translate>NO_ITEMS</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="il-public-items-back">
    <p><a href="https://www.worldskills.org/internal/" translate>BACK_TO_HOME</a></p>
    <br/>
</div>